# TallCMS Theme Development Guide

This guide provides comprehensive documentation for theme developers working with TallCMS's block-only architecture and fluid responsive design system.

## ğŸ—ï¸ Architecture Overview

### Block-Only Canvas Approach

TallCMS uses a **pure block composition system** where all content is created using designed blocks rather than mixing raw HTML with blocks.

```php
// Page template is intentionally simple
@if($renderedContent === 'WELCOME_PAGE')
    @include('welcome.tallcms')
@else
    <div class="w-full">
        {!! $renderedContent !!}
    </div>
@endif
```

**Key Principles:**
- Every piece of content is a styled block
- No mixed HTML/block content complexity
- Predictable, professional layouts
- Theme-ready structure

### Available Block Types

1. **Hero Block** - Full-screen sections with CTAs and background images
2. **Content Block** - Title + rich text for articles and basic content
3. **Call-to-Action Block** - Conversion-focused promotional sections
4. **Image Gallery Block** - Professional galleries with lightbox functionality

## ğŸ¨ Design System

### Fluid Typography

TallCMS uses CSS `clamp()` functions for truly responsive typography:

```css
/* Hero headings scale from 2.5rem to 7rem based on viewport */
font-size: clamp(2.5rem, 8vw, 7rem);

/* Body text scales from 1.125rem to 1.875rem */
font-size: clamp(1.125rem, 3vw, 1.875rem);

/* Button text scales from 1rem to 1.125rem */
font-size: clamp(1rem, 2vw, 1.125rem);
```

### Responsive Container System

**Edge-to-Edge with Smart Padding:**
```css
/* Viewport-based padding that scales with screen size */
padding-left: clamp(1rem, 5vw, 4rem);
padding-right: clamp(1rem, 5vw, 4rem);

/* Responsive breakpoint classes */
px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16
```

**Container Patterns:**
- **Full-width blocks**: Use `w-full` with responsive padding
- **Content blocks**: Add `max-w-4xl mx-auto` for reading width
- **Hero sections**: Full viewport with centered content container

### Font System

**Primary Font:** Inter (modern, readable)
```html
<link href="https://fonts.bunny.net/css?family=inter:400,500,600,700&display=swap" rel="stylesheet" />
```

**CSS Custom Properties:**
```css
--font-sans: 'Inter', ui-sans-serif, system-ui, sans-serif;
--font-inter: 'Inter', ui-sans-serif, system-ui, sans-serif;
```

## ğŸ§± Block Development

### Block Structure

All blocks follow the hybrid styling approach for theme compatibility:

```php
class MyCustomBlock extends RichContentCustomBlock
{
    public static function toHtml(array $config, array $data): string
    {
        return view('cms.blocks.my-custom-block', $config)->render();
    }
}
```

### Hybrid Styling Pattern

**Always include both Tailwind classes AND inline styles:**

```blade
<section class="py-16 bg-gray-50" 
         style="padding-top: 4rem; padding-bottom: 4rem; background-color: #f9fafb;">
    <h1 class="text-4xl font-bold text-gray-900" 
        style="font-size: clamp(2.25rem, 6vw, 4.5rem); font-weight: bold; color: #111827;">
        {{ $title }}
    </h1>
</section>
```

**Why Hybrid?**
- **Tailwind classes**: Primary styling, responsiveness, hover states
- **Inline styles**: Guarantee admin previews work correctly
- **Theme override**: Themes can override either approach

### Block Template Requirements

**Essential CSS Classes:**
```blade
{{-- Full-width section with responsive padding --}}
<section class="w-full px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-16 sm:py-24">
    
    {{-- Content container for readability --}}
    <div class="max-w-4xl mx-auto">
        
        {{-- Fluid typography --}}
        <h1 style="font-size: clamp(2.25rem, 6vw, 4.5rem);">Title</h1>
        
    </div>
</section>
```

### Navigation Awareness

Blocks must handle the fixed navigation overlay:

```blade
{{-- First section padding to avoid navigation overlap --}}
<section class="{{ $first_section ? 'pt-32 sm:pt-36' : 'pt-16 sm:pt-24' }}">
```

**Navigation Specifications:**
- Height: `h-20` (80px)
- Position: `absolute top-0`
- Background: `bg-white/95 backdrop-blur-md`

## ğŸ“ Grid Layout System

### TipTap Grid Integration

TallCMS supports TipTap's grid extension with custom CSS:

```html
<!-- Generated by TipTap -->
<div class="grid-layout" style="--cols: repeat(2, minmax(0, 1fr));" data-from-breakpoint="lg">
    <div class="grid-layout-col" style="--col-span: span 1 / span 1;">
        <p>Content here</p>
    </div>
</div>
```

### Grid CSS Requirements

```css
.grid-layout {
    display: grid;
    grid-template-columns: var(--cols);
    gap: 1.5rem;
    width: 100%;
    margin: 1rem 0;
}

.grid-layout-col {
    grid-column: var(--col-span);
    transition: all 0.2s ease;
}

/* Mobile-first responsive behavior */
@media (max-width: 768px) {
    .grid-layout[data-from-breakpoint="lg"] {
        grid-template-columns: 1fr !important;
    }
    .grid-layout-col {
        grid-column: span 1 / span 1 !important;
    }
}
```

## ğŸ¯ Theme Implementation

### Theme File Structure

```
themes/
â”œâ”€â”€ your-theme/
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”‚   â””â”€â”€ app.blade.php
â”‚   â”‚   â”œâ”€â”€ cms/blocks/
â”‚   â”‚   â”‚   â”œâ”€â”€ hero.blade.php
â”‚   â”‚   â”‚   â”œâ”€â”€ content-block.blade.php
â”‚   â”‚   â”‚   â”œâ”€â”€ call-to-action.blade.php
â”‚   â”‚   â”‚   â””â”€â”€ image-gallery.blade.php
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â”œâ”€â”€ menu.blade.php
â”‚   â”‚       â””â”€â”€ menu-item.blade.php
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ theme.css
â”‚   â””â”€â”€ config/
â”‚       â””â”€â”€ theme.php
```

### Layout Requirements

**Navigation Structure:**
```blade
<nav class="absolute top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md">
    <div class="w-full px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16">
        <div class="flex justify-between h-20">
            <!-- Logo and menu content -->
        </div>
    </div>
</nav>
```

**Main Content:**
```blade
<main>
    {{ $slot }} <!-- Pure block content -->
</main>
```

**Footer Structure:**
```blade
<footer class="bg-gray-50">
    <div class="w-full px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-16">
        <!-- Footer content -->
    </div>
</footer>
```

### CSS Custom Properties

Themes should support these CSS variables:

```css
:root {
    /* Typography */
    --font-sans: 'Inter', system-ui, sans-serif;
    
    /* Fluid spacing */
    --container-padding: clamp(1rem, 5vw, 4rem);
    --section-padding: clamp(4rem, 8vw, 8rem);
    
    /* Colors (customize for theme) */
    --color-primary: #3b82f6;
    --color-secondary: #6366f1;
    --color-accent: #f59e0b;
}
```

## ğŸ› ï¸ Development Best Practices

### Block Development Checklist

- [ ] **Hybrid Styling**: Include both Tailwind and inline styles
- [ ] **Responsive Design**: Test on mobile, tablet, and desktop
- [ ] **Navigation Aware**: Handle fixed navigation properly
- [ ] **Fluid Typography**: Use clamp() for responsive text
- [ ] **Grid Compatible**: Work well inside TipTap grid layouts
- [ ] **Preview Support**: Render correctly in admin editor
- [ ] **Merge Tags**: Support dynamic content where applicable

### Performance Considerations

```css
/* Optimize transitions */
* {
    transition: all 0.3s ease;
}

/* Efficient backdrop blur */
.backdrop-blur-md {
    backdrop-filter: blur(12px);
}

/* Optimized grid gaps */
.grid-layout {
    gap: 1.5rem; /* Consistent spacing */
}
```

### Accessibility Requirements

```blade
{{-- Semantic HTML --}}
<section aria-labelledby="section-title">
    <h2 id="section-title">{{ $title }}</h2>
</section>

{{-- Focus management --}}
<a href="#" class="focus:outline-none focus:ring-2 focus:ring-blue-500">
    Link text
</a>

{{-- Color contrast --}}
<p class="text-gray-600" style="color: #4b5563;">
    Ensure sufficient contrast ratios
</p>
```

## ğŸ“‹ Editor Configuration

### Toolbar Customization

```php
// Current optimized toolbar for block-only approach
->toolbarButtons([
    ['grid', 'gridDelete', 'table', 'attachFiles', 'customBlocks', 'mergeTags'],
])
->activePanel('customBlocks')
```

**Why this configuration:**
- **grid/gridDelete**: Layout creation tools
- **customBlocks**: Primary content creation method
- **mergeTags**: Dynamic content insertion
- **table**: Structured data when needed
- **attachFiles**: Media management

### Block Registration

Blocks are auto-discovered from:
```
app/Filament/Forms/Components/RichEditor/RichContentCustomBlocks/
```

No manual registration required - just create the file and template.

## ğŸ”„ Theme Migration

### From Traditional CMS

When migrating from HTML-based themes:

1. **Convert content sections to blocks**
2. **Implement hybrid styling pattern**
3. **Update navigation to fixed overlay**
4. **Add responsive container system**
5. **Implement fluid typography**

### Theme Override System (Future)

Planned theme override paths:
```
themes/{theme}/views/cms/blocks/{block-name}.blade.php
themes/{theme}/views/layouts/app.blade.php
themes/{theme}/views/components/menu.blade.php
```

## âš¡ Performance Tips

### CSS Optimization

```css
/* Use hardware acceleration for transitions */
.hero-section {
    transform: translateZ(0);
    will-change: transform;
}

/* Optimize backdrop blur */
.nav-blur {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
}
```

### Image Optimization

```blade
{{-- Responsive images in blocks --}}
<img src="{{ Storage::url($image) }}" 
     alt="{{ $alt }}"
     loading="lazy"
     class="w-full h-auto"
     style="width: 100%; height: auto;">
```

## ğŸ“š Resources

### Key Files to Study

1. **`resources/views/layouts/app.blade.php`** - Main layout structure
2. **`resources/views/cms/blocks/content-block.blade.php`** - Standard content block
3. **`resources/views/cms/blocks/hero.blade.php`** - Complex hero block
4. **`resources/css/app.css`** - Fluid design system CSS

### Testing Your Theme

1. **Mobile First**: Test on 320px width first
2. **Grid Layouts**: Test blocks inside 2-4 column grids
3. **Navigation Overlap**: Ensure first sections have proper spacing
4. **Typography Scaling**: Test on ultra-wide displays (2560px+)
5. **Block Combinations**: Test various block arrangements

---

**Remember:** TallCMS prioritizes consistent, professional layouts through its block-only architecture. Every design decision should support this principle while providing maximum flexibility for theme creators.