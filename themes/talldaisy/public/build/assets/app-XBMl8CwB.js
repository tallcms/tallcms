function d(r){r.directive("intersect",r.skipDuringClone((e,{value:n,expression:s,modifiers:t},{evaluateLater:i,cleanup:l})=>{let u=i(s),f={rootMargin:y(t),threshold:p(t)},o=new IntersectionObserver(h=>{h.forEach(g=>{g.isIntersecting!==(n==="leave")&&(u(),t.includes("once")&&o.disconnect())})},f);o.observe(e),l(()=>{o.disconnect()})}))}function p(r){if(r.includes("full"))return .99;if(r.includes("half"))return .5;if(!r.includes("threshold"))return 0;let e=r[r.indexOf("threshold")+1];return e==="100"?1:e==="0"?0:+`.${e}`}function m(r){let e=r.match(/^(-?[0-9]+)(px|%)?$/);return e?e[1]+(e[2]||"px"):void 0}function y(r){const e="margin",n="0px 0px 0px 0px",s=r.indexOf(e);if(s===-1)return n;let t=[];for(let i=1;i<5;i++)t.push(m(r[s+i]||""));return t=t.filter(i=>i!==void 0),t.length?t.join(" ").trim():n}var a=d;function c(){return typeof Alpine>"u"?!1:(Alpine.data("contactForm",()=>({formData:{},errors:{},formError:"",submitted:!1,submitting:!1,config:null,submitUrl:"",successMessage:"",signature:"",pageUrl:"",init(){const r=this.$el.dataset.contactFormConfig;if(!r){console.error("Contact form missing data-contact-form-config attribute");return}try{this.config=JSON.parse(r)}catch(e){console.error("Failed to parse contact form config:",e);return}this.submitUrl=this.config.submitUrl||"",this.successMessage=this.config.successMessage||"Thank you for your message!",this.signature=this.config.signature||"",this.pageUrl=this.config.pageUrl||"",this.formData=(this.config.fieldNames||[]).reduce((e,n)=>({...e,[n]:""}),{_honeypot:""})},async submit(){this.submitting=!0,this.errors={},this.formError="";const r=document.querySelector("meta[name=csrf-token]");if(!r){this.formError="Security token missing. Please refresh the page.",this.submitting=!1;return}try{const e=await fetch(this.submitUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r.content,Accept:"application/json"},body:JSON.stringify({...this.formData,_config:this.config.config,_signature:this.signature,_pageUrl:this.pageUrl})}),n=e.headers.get("content-type");if(!n||!n.includes("application/json")){console.error("Non-JSON response received:",e.status),this.formError="Server returned an unexpected response. Please try again.";return}let s;try{s=await e.json()}catch(t){console.error("Failed to parse JSON response:",t),this.formError="Server returned an invalid response. Please try again.";return}e.ok?this.submitted=!0:e.status===422?this.errors=s.errors||{}:e.status===429?this.formError=s.message||"Too many submissions. Please try again later.":e.status===400?this.formError=s.message||"Invalid request. Please refresh the page and try again.":this.formError=s.message||"An error occurred. Please try again."}catch(e){console.error("Contact form submission error:",e),this.formError="A network error occurred. Please check your connection and try again."}finally{this.submitting=!1}},getFieldError(r){return this.errors[r]?this.errors[r][0]:""},hasFieldError(r){return!!this.errors[r]}})),!0)}c()||document.addEventListener("alpine:init",c);window.Alpine?window.Alpine.plugin(a):document.addEventListener("alpine:init",()=>{window.Alpine.plugin(a)});
