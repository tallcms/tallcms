function o(){return typeof Alpine>"u"?!1:(Alpine.data("contactForm",()=>({formData:{},errors:{},formError:"",submitted:!1,submitting:!1,config:null,submitUrl:"",successMessage:"",signature:"",pageUrl:"",init(){const e=this.$el.dataset.contactFormConfig;if(!e){console.error("Contact form missing data-contact-form-config attribute");return}try{this.config=JSON.parse(e)}catch(r){console.error("Failed to parse contact form config:",r);return}this.submitUrl=this.config.submitUrl||"",this.successMessage=this.config.successMessage||"Thank you for your message!",this.signature=this.config.signature||"",this.pageUrl=this.config.pageUrl||"",this.formData=(this.config.fieldNames||[]).reduce((r,s)=>({...r,[s]:""}),{_honeypot:""})},async submit(){this.submitting=!0,this.errors={},this.formError="";const e=document.querySelector("meta[name=csrf-token]");if(!e){this.formError="Security token missing. Please refresh the page.",this.submitting=!1;return}try{const r=await fetch(this.submitUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":e.content,Accept:"application/json"},body:JSON.stringify({...this.formData,_config:this.config.config,_signature:this.signature,_pageUrl:this.pageUrl})}),s=r.headers.get("content-type");if(!s||!s.includes("application/json")){console.error("Non-JSON response received:",r.status),this.formError="Server returned an unexpected response. Please try again.";return}let t;try{t=await r.json()}catch(i){console.error("Failed to parse JSON response:",i),this.formError="Server returned an invalid response. Please try again.";return}r.ok?this.submitted=!0:r.status===422?this.errors=t.errors||{}:r.status===429?this.formError=t.message||"Too many submissions. Please try again later.":r.status===400?this.formError=t.message||"Invalid request. Please refresh the page and try again.":this.formError=t.message||"An error occurred. Please try again."}catch(r){console.error("Contact form submission error:",r),this.formError="A network error occurred. Please check your connection and try again."}finally{this.submitting=!1}},getFieldError(e){return this.errors[e]?this.errors[e][0]:""},hasFieldError(e){return!!this.errors[e]}})),!0)}o()||document.addEventListener("alpine:init",o);
